# Project Structure Reference

This document provides a detailed overview of the project's file and directory organization.

## Directory Tree

```
fastapi-gh-aw-demo/
├── .github/                  # GitHub configuration
│   └── workflows/            # GitHub Actions workflows
│       ├── update-docs.yml   # Documentation automation
│       └── update-docs.lock.yml
├── app/                      # Application source code
│   ├── api/                  # API layer
│   │   ├── __init__.py
│   │   └── routes.py         # API route definitions
│   ├── core/                 # Core functionality
│   │   ├── __init__.py
│   │   └── config.py         # Configuration settings
│   └── main.py               # Application entry point
├── docs/                     # Documentation
│   ├── how-to/               # How-to guides
│   ├── reference/            # Technical reference
│   ├── explanation/          # Conceptual documentation
│   ├── README.md             # Documentation index
│   └── tutorial.md           # Getting started tutorial
├── tests/                    # Test suite
│   ├── __init__.py
│   └── test_routes.py        # Route tests
├── .gitattributes            # Git attributes
├── .gitignore                # Git ignore patterns
├── .python-version           # Python version specification
├── LICENSE                   # MIT License
├── Makefile                  # Common development tasks
├── README.md                 # Project overview
├── main.py                   # Alternative entry point
├── pyproject.toml            # Project configuration
└── uv.lock                   # Dependency lock file
```

## Top-Level Files

### pyproject.toml

Project configuration file following PEP 518/621 standards:

```toml
[project]
name = "fastapi-gh-aw-demo"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.12"
dependencies = [...]

[tool.ruff]
# Linting and formatting configuration
```

**Purpose**: Defines project metadata, dependencies, and tool configurations.

### Makefile

Development task automation:

```makefile
.PHONY: run test lint format

run:     # Start development server
test:    # Run test suite
lint:    # Check code quality
format:  # Format code
```

**Purpose**: Provides convenient shortcuts for common development tasks.

### uv.lock

Dependency lock file generated by `uv`:

**Purpose**: Ensures reproducible dependency installations across environments.

### .python-version

Specifies Python version:

```
3.12
```

**Purpose**: Used by tools like `pyenv` to select the correct Python version.

### .gitignore

Specifies files to exclude from version control:

```gitignore
__pycache__/
*.pyc
.env
.venv/
```

**Purpose**: Prevents committing generated files and sensitive data.

## Application Structure (`app/`)

### app/main.py

Application entry point and FastAPI instance:

```python
from fastapi import FastAPI
from app.api.routes import router

app = FastAPI(title="FastAPI GH-AW Demo", version="0.1.0")
app.include_router(router)

@app.get("/")
def root():
    return {"message": "Welcome to the FastAPI GH AW Demo!"}
```

**Responsibilities**:
- Create FastAPI application instance
- Configure application metadata
- Register routers
- Define root-level endpoints

### app/api/

API layer containing all route definitions.

#### app/api/routes.py

API endpoint definitions:

```python
from fastapi import APIRouter

router = APIRouter(prefix="/api", tags=["demo"])

@router.get("/hello")
def hello(name: str = "World"):
    return {"message": f"Hello, {name}!"}
```

**Responsibilities**:
- Define API endpoints
- Handle request/response logic
- Group related endpoints

**Pattern**: Each major feature area can have its own routes file:
- `routes.py` - General routes
- `user_routes.py` - User-related routes
- `auth_routes.py` - Authentication routes

### app/core/

Core application functionality and configuration.

#### app/core/config.py

Application configuration:

```python
import os

class Settings:
    APP_NAME: str = "FastAPI GH-AW Demo"
    ENV: str = os.getenv("ENV", "development")

settings = Settings()
```

**Responsibilities**:
- Load environment variables
- Define configuration settings
- Provide settings singleton

**Future additions**:
- Database configuration
- External service settings
- Feature flags

## Test Structure (`tests/`)

### tests/test_routes.py

Route endpoint tests:

```python
from fastapi.testclient import TestClient
from app.main import app

client = TestClient(app)

def test_root():
    response = client.get("/")
    assert response.status_code == 200
```

**Responsibilities**:
- Test API endpoints
- Verify request/response behavior
- Ensure error handling

**Organization**:
- One test file per routes file
- Group related tests in classes
- Use descriptive test names

## Documentation Structure (`docs/`)

Following the [Diátaxis framework](https://diataxis.fr/):

### docs/tutorial.md

Learning-oriented step-by-step guide for newcomers.

### docs/how-to/

Problem-oriented practical guides:
- `add-endpoint.md` - Adding new endpoints
- `configure-env.md` - Environment configuration
- `run-tests.md` - Testing guide
- `deploy.md` - Deployment guide

### docs/reference/

Information-oriented technical documentation:
- `endpoints.md` - API endpoint reference
- `configuration.md` - Configuration reference
- `project-structure.md` - This document

### docs/explanation/

Understanding-oriented conceptual documentation:
- `architecture.md` - Application architecture
- `design-decisions.md` - Design choices
- `workflow.md` - Development workflow

## GitHub Configuration (`.github/`)

### .github/workflows/

GitHub Actions workflow definitions:

- `update-docs.yml` - Documentation automation workflow
- Other CI/CD workflows

**Purpose**: Automate testing, deployment, and documentation updates.

## Naming Conventions

### Files and Directories

- **lowercase with underscores**: `test_routes.py`, `api_routes.py`
- **descriptive names**: Clearly indicate purpose
- **consistent patterns**: Follow established naming

### Python Modules

- **PascalCase for classes**: `Settings`, `APIRouter`
- **snake_case for functions**: `get_user()`, `create_item()`
- **snake_case for variables**: `app_name`, `user_id`
- **UPPER_CASE for constants**: `APP_NAME`, `DATABASE_URL`

### Test Files

- **Prefix with `test_`**: `test_routes.py`, `test_models.py`
- **Mirror source structure**: `app/api/routes.py` → `tests/test_routes.py`

## Import Patterns

### Absolute Imports (Recommended)

```python
from app.api.routes import router
from app.core.config import settings
```

### Relative Imports (Within Package)

```python
from .routes import router
from ..core.config import settings
```

**Best Practice**: Use absolute imports for clarity and refactoring ease.

## Adding New Components

### New API Module

1. Create file in `app/api/`: `app/api/user_routes.py`
2. Define router with prefix
3. Register in `app/main.py`
4. Add tests in `tests/test_user_routes.py`

### New Core Module

1. Create file in `app/core/`: `app/core/database.py`
2. Import where needed
3. Add tests if applicable

### New Documentation

1. Determine category (tutorial, how-to, reference, explanation)
2. Create file in appropriate directory
3. Link from `docs/README.md`
4. Follow style guide

## Build Artifacts

The following directories are generated and should not be committed:

- `__pycache__/` - Python bytecode cache
- `.pytest_cache/` - Pytest cache
- `htmlcov/` - Coverage reports
- `.ruff_cache/` - Ruff cache

These are already in `.gitignore`.

## Configuration Files Location

- **Project config**: `pyproject.toml`
- **Environment variables**: `.env` (create this, not committed)
- **Python version**: `.python-version`
- **Git config**: `.gitignore`, `.gitattributes`

## Best Practices

1. **Separation of concerns**: Keep routes, business logic, and data access separate
2. **Consistent structure**: Follow established patterns when adding files
3. **Clear naming**: Use descriptive, unambiguous names
4. **Documentation**: Update docs when adding new components
5. **Testing**: Add tests alongside new features

## See Also

- [Application Architecture](../explanation/architecture.md)
- [How to Add Endpoints](../how-to/add-endpoint.md)
- [Configuration Reference](configuration.md)
